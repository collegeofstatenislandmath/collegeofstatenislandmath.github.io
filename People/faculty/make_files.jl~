using CSV, DataFrames
using Mustache
# NM,NOTE,OFFICE,PHONE,RANK,URL,EMAIL,IMG,INTERESTS,BIO
tpl = mt"""
---
title: {{:NM}}
image: {{:IMG}}
image-alt: {{:NM}}
author: {{:RANK}}
---

## {{:NM}} {{#:NOTE}}{{:NOTE}}{{/:NOTE}}

{{:RANK}}

{{:INTERESTS}

|:-----------|:-----|
| Office:    | {{:OFFICE}} |
| Telephone: | {{:PHONE}}  |
| Email:     | {{:EMAIL}}  |
| url:       | {{:URL}}    |

{{:BIO}}
"""

d = CSV.read("faculty.csv", DataFrame)
for r âˆˆ eachrow(d)
    first,last = split(r.NM, " ")
    fname = "$last-$first.qmd"
    open(fname,"w") do io
        Mustache.render(io, tpl; r...)
    end
end


